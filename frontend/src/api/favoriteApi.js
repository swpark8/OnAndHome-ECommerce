/**
 * ì°œí•˜ê¸°(Favorite) API ëª¨ë“ˆ
 * ========================================
 * ğŸ“Œ ëª¨ë“ˆ ê°œìš”
 * ========================================
 * - íŒŒì¼ ìœ„ì¹˜: src/api/favoriteApi.js
 * - ì—­í• : ë°±ì—”ë“œ Favorite REST APIì™€ í†µì‹ í•˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ API ë ˆì´ì–´
 * - ë°±ì—”ë“œ ì—°ë™: Spring Boot FavoriteRestController (/api/favorites/*)
 * - HTTP í´ë¼ì´ì–¸íŠ¸: fetch API (ë¸Œë¼ìš°ì € ë‚´ì¥)
 *
 * ========================================
 * ğŸ“Œ cartApi.jsì™€ì˜ ì°¨ì´ì 
 * ========================================
 * | í•­ëª©            | favoriteApi.js      | cartApi.js           |
 * |----------------|---------------------|----------------------|
 * | HTTP í´ë¼ì´ì–¸íŠ¸ | fetch API (ë‚´ì¥)     | Axios (axiosConfig)  |
 * | í† í° ì²˜ë¦¬       | getAuthHeader() ìˆ˜ë™ | ì¸í„°ì…‰í„° ìë™ ì²¨ë¶€     |
 * | í† í° ê°±ì‹        | ë¯¸ì§€ì›               | 401ì‹œ ìë™ ê°±ì‹        |
 * | ì—ëŸ¬ ì²˜ë¦¬       | try-catch ê°œë³„ ì²˜ë¦¬  | ì¸í„°ì…‰í„° ê³µí†µ ì²˜ë¦¬     |
 *
 * ========================================
 * ğŸ“Œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
 * ========================================
 * - ProductCard.js: ìƒí’ˆ ì¹´ë“œ í•˜íŠ¸ ì•„ì´ì½˜
 * - ProductDetail.js: ìƒí’ˆ ìƒì„¸ ì°œí•˜ê¸° ë²„íŠ¼
 * - MyFavorites.js: ë§ˆì´í˜ì´ì§€ ì°œ ëª©ë¡
 * - Header.js: í—¤ë” ì°œ ê°œìˆ˜ ë°°ì§€
 *
 * ========================================
 * ğŸ“Œ ì œê³µ ë©”ì„œë“œ
 * ========================================
 * | ë©”ì„œë“œëª…   | ê¸°ëŠ¥              | ë°±ì—”ë“œ API                    |
 * |-----------|------------------|------------------------------|
 * | toggle()  | ì°œ ì¶”ê°€/ì‚­ì œ í† ê¸€  | POST /api/favorites/toggle   |
 * | check()   | ì°œ ì—¬ë¶€ í™•ì¸      | GET /api/favorites/check/{id}|
 * | getList() | ì°œ ëª©ë¡ ì¡°íšŒ      | GET /api/favorites           |
 * | getCount()| ì°œ ê°œìˆ˜ ì¡°íšŒ      | GET /api/favorites/count     |
 */

import { API_BASE_URL } from '../constants';

/** ë°±ì—”ë“œ Favorite API Base URL */
const BASE_URL = `${API_BASE_URL}/api/favorites`;

/**
 * ì¸ì¦ í—¤ë” ìƒì„± í•¨ìˆ˜
 *
 * ========================================
 * ğŸ“Œ ì²˜ë¦¬ íë¦„
 * ========================================
 * 1. localStorageì—ì„œ accessToken ì¡°íšŒ
 * 2. í† í°ì´ ìˆìœ¼ë©´ Authorization í—¤ë” ê°ì²´ ë°˜í™˜
 * 3. í† í°ì´ ì—†ìœ¼ë©´ ë¹ˆ ê°ì²´ ë°˜í™˜ (ë¹„ë¡œê·¸ì¸ ìƒíƒœ)
 *
 * ========================================
 * ğŸ“Œ ë°˜í™˜ ì˜ˆì‹œ
 * ========================================
 * - ë¡œê·¸ì¸ ìƒíƒœ: { 'Authorization': 'Bearer eyJhbGc...' }
 * - ë¹„ë¡œê·¸ì¸ ìƒíƒœ: {}
 *
 * ========================================
 * ğŸ“Œ ì‚¬ìš© ìœ„ì¹˜
 * ========================================
 * ëª¨ë“  API í˜¸ì¶œ ì‹œ headersì— ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìë¡œ ë³‘í•©
 * headers: { 'Content-Type': 'application/json', ...getAuthHeader() }
 *
 * returns {Object} Authorization í—¤ë” ê°ì²´ ë˜ëŠ” ë¹ˆ ê°ì²´
 */
const getAuthHeader = () => {
  // localStorageì—ì„œ JWT Access Token ì¡°íšŒ
  const token = localStorage.getItem('accessToken');

  // í† í° ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¼ í—¤ë” ë°˜í™˜
  // ì‚¼í•­ ì—°ì‚°ì: tokenì´ truthyë©´ í—¤ë” ê°ì²´, falsyë©´ ë¹ˆ ê°ì²´
  return token ? { 'Authorization': `Bearer ${token}` } : {};
};

/**
 * Favorite API ê°ì²´
 *
 * ì°œí•˜ê¸° ê´€ë ¨ ëª¨ë“  API ë©”ì„œë“œë¥¼ í¬í•¨í•˜ëŠ” ê°ì²´
 * exportí•˜ì—¬ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ importí•˜ì—¬ ì‚¬ìš©
 */
export const favoriteAPI = {

  /**
   * ì°œí•˜ê¸° í† ê¸€ (ì¶”ê°€/ì‚­ì œ)
   *
   * ========================================
   * ğŸ“Œ API ì •ë³´
   * ========================================
   * - HTTP Method: POST
   * - URL: /api/favorites/toggle
   * - Content-Type: application/json
   * - ì¸ì¦: í•„ìˆ˜ (JWT í† í°)
   *
   * ========================================
   * ğŸ“Œ ìš”ì²­ Body
   * ========================================
   * {
   *   "productId": 1    // ì°œí•  ìƒí’ˆ ID
   * }
   *
   * ========================================
   * ğŸ“Œ ë°±ì—”ë“œ ì²˜ë¦¬ ë¡œì§ (FavoriteService.toggleFavorite)
   * ========================================
   * 1. userId + productIdë¡œ ê¸°ì¡´ ì°œ ì—¬ë¶€ í™•ì¸
   * 2. ì´ë¯¸ ì°œí•œ ìƒí’ˆ â†’ ì°œ ì‚­ì œ (DELETE)
   * 3. ì°œí•˜ì§€ ì•Šì€ ìƒí’ˆ â†’ ì°œ ì¶”ê°€ (INSERT)
   *
   * ========================================
   * ğŸ“Œ ì‘ë‹µ ì˜ˆì‹œ
   * ========================================
   * // ì°œ ì¶”ê°€ ì‹œ
   * {
   *   "success": true,
   *   "message": "ì°œ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",
   *   "isFavorite": true,
   *   "data": { "id": 1, "userId": 100, "productId": 1, ... }
   * }
   *
   * // ì°œ ì‚­ì œ ì‹œ
   * {
   *   "success": true,
   *   "message": "ì°œ ëª©ë¡ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.",
   *   "isFavorite": false,
   *   "data": null
   * }
   *
   * ========================================
   * ğŸ“Œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
   * ========================================
   * - ProductCard.js: í•˜íŠ¸ ì•„ì´ì½˜ í´ë¦­ ì‹œ
   * - ProductDetail.js: "ì°œí•˜ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ
   * - MyFavorites.js: ì°œ ëª©ë¡ì—ì„œ ì‚­ì œ ì‹œ
   *
   * param {number} productId - ì°œí•  ìƒí’ˆì˜ ê³ ìœ  ID
   * returns {Promise<Object>} API ì‘ë‹µ ê°ì²´
   * throws {Error} ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë˜ëŠ” ì„œë²„ ì˜¤ë¥˜ ì‹œ
   */
  toggle: async (productId) => {
    try {
      const response = await fetch(`${BASE_URL}/toggle`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',  // JSON í˜•ì‹ ëª…ì‹œ
          ...getAuthHeader()                    // JWT í† í° í—¤ë” ë³‘í•©
        },
        body: JSON.stringify({ productId })    // productIdë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜
      });

      // ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±í•˜ì—¬ ë°˜í™˜
      return await response.json();
    } catch (error) {
      console.error('ì°œí•˜ê¸° í† ê¸€ ì˜¤ë¥˜:', error);
      throw error;  // ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì—ëŸ¬ ì²˜ë¦¬í•˜ë„ë¡ ì¬throw
    }
  },

  /**
   * ì°œ ì—¬ë¶€ í™•ì¸
   *
   * ========================================
   * ğŸ“Œ API ì •ë³´
   * ========================================
   * - HTTP Method: GET
   * - URL: /api/favorites/check/{productId}
   * - ì¸ì¦: ì„ íƒ (ë¹„ë¡œê·¸ì¸ ì‹œ isFavorite: false ë°˜í™˜)
   *
   * ========================================
   * ğŸ“Œ ë°±ì—”ë“œ ì²˜ë¦¬ ë¡œì§ (FavoriteRestController.checkFavorite)
   * ========================================
   * 1. Authorization í—¤ë” í™•ì¸
   *    - ì—†ìœ¼ë©´: { success: true, isFavorite: false } ë°˜í™˜
   *    - ìˆìœ¼ë©´: JWT ê²€ì¦ í›„ ì°œ ì—¬ë¶€ ì¡°íšŒ
   * 2. FavoriteService.isFavorite(userId, productId) í˜¸ì¶œ
   *
   * ========================================
   * ğŸ“Œ ì‘ë‹µ ì˜ˆì‹œ
   * ========================================
   * // ì°œí•œ ìƒí’ˆ
   * { "success": true, "isFavorite": true }
   *
   * // ì°œí•˜ì§€ ì•Šì€ ìƒí’ˆ ë˜ëŠ” ë¹„ë¡œê·¸ì¸
   * { "success": true, "isFavorite": false }
   *
   * ========================================
   * ğŸ“Œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
   * ========================================
   * - ProductDetail.js: ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ë¡œë“œ ì‹œ
   *   â†’ í•˜íŠ¸ ì•„ì´ì½˜ ìƒ‰ìƒ ê²°ì • (ë¹¨ê°„ìƒ‰/íšŒìƒ‰)
   * - ProductCard.js: ìƒí’ˆ ì¹´ë“œ ë Œë”ë§ ì‹œ
   *
   * ========================================
   * ğŸ“Œ ì—ëŸ¬ ì²˜ë¦¬ íŠ¹ì§•
   * ========================================
   * - ì˜¤ë¥˜ ë°œìƒ ì‹œ throwí•˜ì§€ ì•Šê³  ê¸°ë³¸ê°’ ë°˜í™˜
   * - { success: true, isFavorite: false }
   * - ì´ìœ : UI ë Œë”ë§ ì¤‘ë‹¨ ë°©ì§€, ì‚¬ìš©ì ê²½í—˜ ìš°ì„ 
   *
   * param {number} productId - í™•ì¸í•  ìƒí’ˆì˜ ê³ ìœ  ID
   * returns {Promise<Object>} { success: boolean, isFavorite: boolean }
   */
  check: async (productId) => {
    try {
      const response = await fetch(`${BASE_URL}/check/${productId}`, {
        headers: getAuthHeader()  // GET ìš”ì²­ì´ë¯€ë¡œ Content-Type ë¶ˆí•„ìš”
      });
      return await response.json();
    } catch (error) {
      console.error('ì°œ ì—¬ë¶€ í™•ì¸ ì˜¤ë¥˜:', error);
      // ì˜¤ë¥˜ ì‹œì—ë„ ê¸°ë³¸ê°’ ë°˜í™˜ (UI ì¤‘ë‹¨ ë°©ì§€)
      return { success: true, isFavorite: false };
    }
  },

  /**
   * ì°œ ëª©ë¡ ì¡°íšŒ
   *
   * ========================================
   * ğŸ“Œ API ì •ë³´
   * ========================================
   * - HTTP Method: GET
   * - URL: /api/favorites
   * - ì¸ì¦: í•„ìˆ˜ (JWT í† í°)
   *
   * ========================================
   * ğŸ“Œ ë°±ì—”ë“œ ì²˜ë¦¬ ë¡œì§ (FavoriteService.getFavoritesByUserId)
   * ========================================
   * 1. JWTì—ì„œ userId ì¶”ì¶œ
   * 2. FavoriteRepository.findByUserIdOrderByCreatedAtDesc() í˜¸ì¶œ
   * 3. Favorite ì—”í‹°í‹° â†’ FavoriteDTO ë³€í™˜
   * 4. ìµœì‹ ìˆœ ì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
   *
   * ========================================
   * ğŸ“Œ ì‘ë‹µ ì˜ˆì‹œ
   * ========================================
   * {
   *   "success": true,
   *   "data": [
   *     {
   *       "id": 1,
   *       "userId": 100,
   *       "productId": 50,
   *       "productName": "ì›ëª© í…Œì´ë¸”",
   *       "productCode": "TBL-001",
   *       "price": 150000,
   *       "salePrice": 120000,
   *       "thumbnailImage": "table.jpg",
   *       "category": "ê°€êµ¬",
   *       "stock": 10,
   *       "createdAt": "2024-01-15T10:30:00"
   *     },
   *     ...
   *   ]
   * }
   *
   * ========================================
   * ğŸ“Œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
   * ========================================
   * - MyFavorites.js: ë§ˆì´í˜ì´ì§€ ì°œ ëª©ë¡ í˜ì´ì§€
   *   â†’ useEffectì—ì„œ í˜¸ì¶œí•˜ì—¬ ìƒí’ˆ ëª©ë¡ ë Œë”ë§
   *
   * returns {Promise<Object>} { success: boolean, data: FavoriteDTO[] }
   * throws {Error} ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë˜ëŠ” ì¸ì¦ ì‹¤íŒ¨ ì‹œ
   */
  getList: async () => {
    try {
      const response = await fetch(BASE_URL, {
        headers: getAuthHeader()
      });
      return await response.json();
    } catch (error) {
      console.error('ì°œ ëª©ë¡ ì¡°íšŒ ì˜¤ë¥˜:', error);
      throw error;  // ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨ëŠ” ì¤‘ìš”í•˜ë¯€ë¡œ throw
    }
  },

  /**
   * ì°œ ê°œìˆ˜ ì¡°íšŒ
   *
   * ========================================
   * ğŸ“Œ API ì •ë³´
   * ========================================
   * - HTTP Method: GET
   * - URL: /api/favorites/count
   * - ì¸ì¦: ì„ íƒ (ë¹„ë¡œê·¸ì¸ ì‹œ count: 0 ë°˜í™˜)
   *
   * ========================================
   * ğŸ“Œ ë°±ì—”ë“œ ì²˜ë¦¬ ë¡œì§ (FavoriteRestController.getFavoriteCount)
   * ========================================
   * 1. Authorization í—¤ë” í™•ì¸
   *    - ì—†ìœ¼ë©´: { success: true, count: 0 } ë°˜í™˜
   *    - ìˆìœ¼ë©´: JWT ê²€ì¦ í›„ ê°œìˆ˜ ì¡°íšŒ
   * 2. FavoriteService.getFavoriteCountByUserId(userId) í˜¸ì¶œ
   *
   * ========================================
   * ğŸ“Œ ì‘ë‹µ ì˜ˆì‹œ
   * ========================================
   * { "success": true, "count": 5 }
   *
   * ========================================
   * ğŸ“Œ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
   * ========================================
   * - Header.js: í—¤ë”ì˜ í•˜íŠ¸ ì•„ì´ì½˜ ì˜† ë°°ì§€ ìˆ«ì
   *   â†’ ë¡œê·¸ì¸ ì‹œ ì°œ ê°œìˆ˜ í‘œì‹œ
   *
   * ========================================
   * ğŸ“Œ ì—ëŸ¬ ì²˜ë¦¬ íŠ¹ì§•
   * ========================================
   * - ì˜¤ë¥˜ ë°œìƒ ì‹œ throwí•˜ì§€ ì•Šê³  ê¸°ë³¸ê°’ ë°˜í™˜
   * - { success: true, count: 0 }
   * - ì´ìœ : í—¤ë” ë°°ì§€ëŠ” ë¶€ê°€ ì •ë³´ì´ë¯€ë¡œ ì˜¤ë¥˜ ì‹œ 0 í‘œì‹œ
   *
   * returns {Promise<Object>} { success: boolean, count: number }
   */
  getCount: async () => {
    try {
      const response = await fetch(`${BASE_URL}/count`, {
        headers: getAuthHeader()
      });
      return await response.json();
    } catch (error) {
      console.error('ì°œ ê°œìˆ˜ ì¡°íšŒ ì˜¤ë¥˜:', error);
      // ì˜¤ë¥˜ ì‹œì—ë„ ê¸°ë³¸ê°’ ë°˜í™˜ (í—¤ë” ë°°ì§€ í‘œì‹œìš©)
      return { success: true, count: 0 };
    }
  }
};

/**
 * ê¸°ë³¸ ë‚´ë³´ë‚´ê¸°
 * import favoriteAPI from './favoriteApi' í˜•íƒœë¡œ ì‚¬ìš© ê°€ëŠ¥
 */
export default favoriteAPI;


/*
 * ========================================
 * ğŸ“Œ Favorite ê¸°ëŠ¥ ì „ì²´ ë°ì´í„° íë¦„
 * ========================================
 *
 * [ì‚¬ìš©ì ì•¡ì…˜: ìƒí’ˆ ì°œí•˜ê¸° ë²„íŠ¼ í´ë¦­]
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         FRONTEND (React)                           â”‚
 * â”‚                                                                     â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚  ProductDetail.js / ProductCard.js                          â”‚   â”‚
 * â”‚  â”‚                                                             â”‚   â”‚
 * â”‚  â”‚  const handleFavorite = async () => {                       â”‚   â”‚
 * â”‚  â”‚    const result = await favoriteAPI.toggle(productId);      â”‚   â”‚
 * â”‚  â”‚    if (result.success) {                                    â”‚   â”‚
 * â”‚  â”‚      setIsFavorite(result.isFavorite);  // í•˜íŠ¸ ìƒíƒœ ë³€ê²½    â”‚   â”‚
 * â”‚  â”‚    }                                                        â”‚   â”‚
 * â”‚  â”‚  };                                                         â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                             â”‚                                      â”‚
 * â”‚                             â†“                                      â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚  src/api/favoriteApi.js                                     â”‚   â”‚
 * â”‚  â”‚                                                             â”‚   â”‚
 * â”‚  â”‚  toggle: async (productId) => {                             â”‚   â”‚
 * â”‚  â”‚    const response = await fetch(`${BASE_URL}/toggle`, {     â”‚   â”‚
 * â”‚  â”‚      method: 'POST',                                        â”‚   â”‚
 * â”‚  â”‚      headers: {                                             â”‚   â”‚
 * â”‚  â”‚        'Content-Type': 'application/json',                  â”‚   â”‚
 * â”‚  â”‚        'Authorization': 'Bearer eyJhbGc...'  â† getAuthHeaderâ”‚   â”‚
 * â”‚  â”‚      },                                                     â”‚   â”‚
 * â”‚  â”‚      body: JSON.stringify({ productId })                    â”‚   â”‚
 * â”‚  â”‚    });                                                      â”‚   â”‚
 * â”‚  â”‚    return await response.json();                            â”‚   â”‚
 * â”‚  â”‚  }                                                          â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                             â”‚                                      â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                               â”‚
 *                               â”‚  HTTP POST /api/favorites/toggle
 *                               â”‚  Headers: Authorization: Bearer <JWT>
 *                               â”‚  Body: { "productId": 123 }
 *                               â†“
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         BACKEND (Spring Boot)                       â”‚
 * â”‚                                                                     â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚  FavoriteRestController.java                                â”‚   â”‚
 * â”‚  â”‚  @PostMapping("/toggle")                                    â”‚   â”‚
 * â”‚  â”‚                                                             â”‚   â”‚
 * â”‚  â”‚  1. Authorization í—¤ë”ì—ì„œ JWT í† í° ì¶”ì¶œ                      â”‚   â”‚
 * â”‚  â”‚  2. JWTUtil.validateToken(token) â†’ userId ì¶”ì¶œ               â”‚   â”‚
 * â”‚  â”‚  3. UserRepository.findByUserId(userId) â†’ User ì¡°íšŒ          â”‚   â”‚
 * â”‚  â”‚  4. FavoriteService.toggleFavorite(userId, productId) í˜¸ì¶œ   â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                             â”‚                                      â”‚
 * â”‚                             â†“                                      â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚  FavoriteService.java                                       â”‚   â”‚
 * â”‚  â”‚  @Transactional                                             â”‚   â”‚
 * â”‚  â”‚  toggleFavorite(Long userId, Long productId)                â”‚   â”‚
 * â”‚  â”‚                                                             â”‚   â”‚
 * â”‚  â”‚  1. findByUserIdAndProductId(userId, productId)             â”‚   â”‚
 * â”‚  â”‚     â†“                                                       â”‚   â”‚
 * â”‚  â”‚  2. ê²°ê³¼ì— ë”°ë¼ ë¶„ê¸°:                                         â”‚   â”‚
 * â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
 * â”‚  â”‚     â”‚ ì´ë¯¸ ì°œí•¨        â”‚ ì•„ì§ ì°œ ì•ˆí•¨                     â”‚   â”‚   â”‚
 * â”‚  â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚
 * â”‚  â”‚     â”‚ DELETE ì‹¤í–‰     â”‚ INSERT ì‹¤í–‰                      â”‚   â”‚   â”‚
 * â”‚  â”‚     â”‚ return null     â”‚ return FavoriteDTO              â”‚   â”‚   â”‚
 * â”‚  â”‚     â”‚ isFavorite:falseâ”‚ isFavorite: true                â”‚   â”‚   â”‚
 * â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                             â”‚                                      â”‚
 * â”‚                             â†“                                      â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚  FavoriteRepository.java                                    â”‚   â”‚
 * â”‚  â”‚  extends JpaRepository<Favorite, Long>                      â”‚   â”‚
 * â”‚  â”‚                                                             â”‚   â”‚
 * â”‚  â”‚  - findByUserIdAndProductId(userId, productId)              â”‚   â”‚
 * â”‚  â”‚  - save(favorite) / delete(favorite)                        â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                             â”‚                                      â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *                               â”‚
 *                               â†“
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         DATABASE (MySQL)                            â”‚
 * â”‚                                                                     â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 * â”‚  â”‚  favorite í…Œì´ë¸”                                            â”‚   â”‚
 * â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
 * â”‚  â”‚  â”‚ id â”‚ user_id â”‚ product_id â”‚ created_at                 â”‚ â”‚   â”‚
 * â”‚  â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚
 * â”‚  â”‚  â”‚ 1  â”‚ 100     â”‚ 123        â”‚ 2024-01-15 10:30:00        â”‚ â”‚   â”‚
 * â”‚  â”‚  â”‚ 2  â”‚ 100     â”‚ 456        â”‚ 2024-01-16 14:20:00        â”‚ â”‚   â”‚
 * â”‚  â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
 * â”‚  â”‚                                                             â”‚   â”‚
 * â”‚  â”‚  UNIQUE ì œì•½ì¡°ê±´: (user_id, product_id)                      â”‚   â”‚
 * â”‚  â”‚  â†’ ê°™ì€ ì‚¬ìš©ìê°€ ê°™ì€ ìƒí’ˆì„ ì¤‘ë³µ ì°œ ë¶ˆê°€                      â”‚   â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
 * â”‚                                                                     â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 *
 * ========================================
 * ğŸ“Œ API ë©”ì„œë“œë³„ í˜¸ì¶œ ì‹œì 
 * ========================================
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                        ì‚¬ìš©ì í–‰ë™ íë¦„                              â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 * [1. ìƒí’ˆ ëª©ë¡ í˜ì´ì§€ ì§„ì…]
 *     â”‚
 *     â”œâ”€â”€ ProductCard.js ë Œë”ë§
 *     â”‚   â””â”€â”€ favoriteAPI.check(productId)  â† ê° ìƒí’ˆì˜ ì°œ ì—¬ë¶€ í™•ì¸
 *     â”‚       â†’ í•˜íŠ¸ ì•„ì´ì½˜ ìƒ‰ìƒ ê²°ì • (ë¹¨ê°„/íšŒìƒ‰)
 *     â”‚
 *     â””â”€â”€ Header.js ë Œë”ë§
 *         â””â”€â”€ favoriteAPI.getCount()  â† ì°œ ê°œìˆ˜ ë°°ì§€ í‘œì‹œ
 *
 * [2. ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ì§„ì…]
 *     â”‚
 *     â””â”€â”€ ProductDetail.js
 *         â””â”€â”€ useEffect(() => {
 *               favoriteAPI.check(productId);  â† ì°œ ì—¬ë¶€ í™•ì¸
 *             }, [productId]);
 *
 * [3. ì°œí•˜ê¸° ë²„íŠ¼ í´ë¦­]
 *     â”‚
 *     â””â”€â”€ onClick={() => favoriteAPI.toggle(productId)}
 *         â”‚
 *         â”œâ”€â”€ ì„±ê³µ ì‹œ: setIsFavorite(!isFavorite)  â† UI í† ê¸€
 *         â””â”€â”€ ì‹¤íŒ¨ ì‹œ: ì—ëŸ¬ í† ìŠ¤íŠ¸ í‘œì‹œ
 *
 * [4. ë§ˆì´í˜ì´ì§€ > ì°œ ëª©ë¡]
 *     â”‚
 *     â””â”€â”€ MyFavorites.js
 *         â””â”€â”€ useEffect(() => {
 *               favoriteAPI.getList();  â† ì „ì²´ ì°œ ëª©ë¡ ì¡°íšŒ
 *             }, []);
 *
 *
 * ========================================
 * ğŸ“Œ ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ
 * ========================================
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ ë©”ì„œë“œ        â”‚ ì—ëŸ¬ ì‹œ ë™ì‘         â”‚ ì´ìœ                           â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ toggle()     â”‚ throw error         â”‚ ì‚¬ìš©ì ì•¡ì…˜ ê²°ê³¼ì´ë¯€ë¡œ ì•Œë¦¼ í•„ìš” â”‚
 * â”‚ check()      â”‚ return ê¸°ë³¸ê°’        â”‚ UI ë Œë”ë§ ì¤‘ë‹¨ ë°©ì§€            â”‚
 * â”‚ getList()    â”‚ throw error         â”‚ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨ëŠ” ì¤‘ìš”í•œ ì •ë³´    â”‚
 * â”‚ getCount()   â”‚ return ê¸°ë³¸ê°’        â”‚ ë°°ì§€ëŠ” ë¶€ê°€ ì •ë³´               â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 *
 * ========================================
 * ğŸ“Œ localStorage í† í° êµ¬ì¡°
 * ========================================
 *
 * localStorage
 * â”œâ”€â”€ accessToken: "eyJhbGciOiJIUzI1NiJ9..."   â† getAuthHeader()ì—ì„œ ì‚¬ìš©
 * â”œâ”€â”€ refreshToken: "eyJhbGciOiJIUzI1NiJ9..."  â† í† í° ê°±ì‹ ìš© (axiosConfigì—ì„œ ì‚¬ìš©)
 * â””â”€â”€ userInfo: '{"id":100,"userId":"user01","username":"í™ê¸¸ë™",...}'
 *
 *
 * ========================================
 * ğŸ“Œ cartApi.jsì™€ favoriteApi.js ë¹„êµ
 * ========================================
 *
 * cartApi.js (Axios ì‚¬ìš©)
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚  import apiClient from './axiosConfig';                             â”‚
 * â”‚                                                                     â”‚
 * â”‚  // í† í° ìë™ ì²¨ë¶€ (ì¸í„°ì…‰í„°)                                         â”‚
 * â”‚  // 401 ì—ëŸ¬ ì‹œ ìë™ í† í° ê°±ì‹                                         â”‚
 * â”‚  // ê³µí†µ ì—ëŸ¬ ì²˜ë¦¬                                                   â”‚
 * â”‚                                                                     â”‚
 * â”‚  export const addToCart = (productId, quantity) =>                  â”‚
 * â”‚    apiClient.post('/api/cart/add', { productId, quantity });        â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 * favoriteApi.js (fetch ì‚¬ìš©)
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚  const getAuthHeader = () => { ... };  // ìˆ˜ë™ í† í° ì²˜ë¦¬              â”‚
 * â”‚                                                                     â”‚
 * â”‚  // ê° ë©”ì„œë“œì—ì„œ ê°œë³„ ì—ëŸ¬ ì²˜ë¦¬                                      â”‚
 * â”‚  // í† í° ê°±ì‹  ë¯¸ì§€ì›                                                 â”‚
 * â”‚                                                                     â”‚
 * â”‚  toggle: async (productId) => {                                     â”‚
 * â”‚    const response = await fetch(`${BASE_URL}/toggle`, {             â”‚
 * â”‚      headers: { ...getAuthHeader() },                               â”‚
 * â”‚      body: JSON.stringify({ productId })                            â”‚
 * â”‚    });                                                              â”‚
 * â”‚  }                                                                  â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 */
